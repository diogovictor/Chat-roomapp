{"filter":false,"title":"chat.js","tooltip":"/client/js/chat.js","undoManager":{"mark":100,"position":100,"stack":[[{"group":"doc","deltas":[{"start":{"row":338,"column":35},"end":{"row":338,"column":36},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":338,"column":37},"end":{"row":338,"column":38},"action":"insert","lines":[","]}]}],[{"group":"doc","deltas":[{"start":{"row":338,"column":38},"end":{"row":338,"column":39},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":338,"column":39},"end":{"row":338,"column":40},"action":"insert","lines":["w"]}]}],[{"group":"doc","deltas":[{"start":{"row":338,"column":40},"end":{"row":338,"column":41},"action":"insert","lines":["i"]}]}],[{"group":"doc","deltas":[{"start":{"row":338,"column":41},"end":{"row":338,"column":42},"action":"insert","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":338,"column":42},"end":{"row":338,"column":43},"action":"insert","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":338,"column":43},"end":{"row":338,"column":44},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":338,"column":44},"end":{"row":338,"column":45},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":297,"column":9},"end":{"row":297,"column":10},"action":"remove","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":297,"column":8},"end":{"row":297,"column":9},"action":"remove","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":297,"column":4},"end":{"row":297,"column":8},"action":"remove","lines":["    "]}]}],[{"group":"doc","deltas":[{"start":{"row":297,"column":0},"end":{"row":297,"column":4},"action":"remove","lines":["    "]}]}],[{"group":"doc","deltas":[{"start":{"row":296,"column":49},"end":{"row":297,"column":0},"action":"remove","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":368,"column":12},"end":{"row":369,"column":0},"action":"insert","lines":["",""]},{"start":{"row":369,"column":0},"end":{"row":369,"column":12},"action":"insert","lines":["            "]}]}],[{"group":"doc","deltas":[{"start":{"row":369,"column":12},"end":{"row":369,"column":13},"action":"insert","lines":["i"]}]}],[{"group":"doc","deltas":[{"start":{"row":369,"column":13},"end":{"row":369,"column":14},"action":"insert","lines":["f"]}]}],[{"group":"doc","deltas":[{"start":{"row":369,"column":14},"end":{"row":369,"column":16},"action":"insert","lines":["()"]}]}],[{"group":"doc","deltas":[{"start":{"row":369,"column":15},"end":{"row":369,"column":16},"action":"insert","lines":["$"]}]}],[{"group":"doc","deltas":[{"start":{"row":369,"column":15},"end":{"row":369,"column":16},"action":"remove","lines":["$"]},{"start":{"row":369,"column":15},"end":{"row":369,"column":21},"action":"insert","lines":["$scope"]}]}],[{"group":"doc","deltas":[{"start":{"row":369,"column":21},"end":{"row":369,"column":22},"action":"insert","lines":["."]}]}],[{"group":"doc","deltas":[{"start":{"row":369,"column":22},"end":{"row":369,"column":23},"action":"insert","lines":["p"]}]}],[{"group":"doc","deltas":[{"start":{"row":369,"column":22},"end":{"row":369,"column":23},"action":"remove","lines":["p"]},{"start":{"row":369,"column":22},"end":{"row":369,"column":29},"action":"insert","lines":["playing"]}]}],[{"group":"doc","deltas":[{"start":{"row":369,"column":29},"end":{"row":369,"column":30},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":369,"column":30},"end":{"row":369,"column":31},"action":"insert","lines":["="]}]}],[{"group":"doc","deltas":[{"start":{"row":369,"column":31},"end":{"row":369,"column":32},"action":"insert","lines":["="]}]}],[{"group":"doc","deltas":[{"start":{"row":369,"column":32},"end":{"row":369,"column":33},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":369,"column":33},"end":{"row":369,"column":34},"action":"insert","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":369,"column":34},"end":{"row":369,"column":35},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":369,"column":35},"end":{"row":369,"column":36},"action":"insert","lines":["u"]}]}],[{"group":"doc","deltas":[{"start":{"row":369,"column":36},"end":{"row":369,"column":37},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":369,"column":38},"end":{"row":369,"column":39},"action":"insert","lines":["{"]}]}],[{"group":"doc","deltas":[{"start":{"row":369,"column":39},"end":{"row":371,"column":13},"action":"insert","lines":["","                ","            }"]}]}],[{"group":"doc","deltas":[{"start":{"row":372,"column":11},"end":{"row":375,"column":45},"action":"remove","lines":[" if($scope.lastPlayerStarted == 1)","                $scope.lastPlayerStarted = 2;","            else ","                $scope.lastPlayerStarted = 1;"]}]}],[{"group":"doc","deltas":[{"start":{"row":370,"column":16},"end":{"row":373,"column":45},"action":"insert","lines":[" if($scope.lastPlayerStarted == 1)","                $scope.lastPlayerStarted = 2;","            else ","                $scope.lastPlayerStarted = 1;"]}]}],[{"group":"doc","deltas":[{"start":{"row":371,"column":0},"end":{"row":371,"column":4},"action":"insert","lines":["    "]},{"start":{"row":372,"column":0},"end":{"row":372,"column":4},"action":"insert","lines":["    "]},{"start":{"row":373,"column":0},"end":{"row":373,"column":4},"action":"insert","lines":["    "]}]}],[{"group":"doc","deltas":[{"start":{"row":372,"column":15},"end":{"row":372,"column":16},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":16,"column":7},"end":{"row":19,"column":7},"action":"insert","lines":[".when(\"/newRoom\", {","\t      templateUrl : \"/newRoom.html\",","\t      controller : \"NewRoomController\"","\t    })"]}]}],[{"group":"doc","deltas":[{"start":{"row":16,"column":18},"end":{"row":16,"column":19},"action":"insert","lines":["G"]}]}],[{"group":"doc","deltas":[{"start":{"row":16,"column":19},"end":{"row":16,"column":20},"action":"insert","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":16,"column":20},"end":{"row":16,"column":21},"action":"insert","lines":["m"]}]}],[{"group":"doc","deltas":[{"start":{"row":16,"column":21},"end":{"row":16,"column":22},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":17,"column":26},"end":{"row":17,"column":27},"action":"insert","lines":["G"]}]}],[{"group":"doc","deltas":[{"start":{"row":17,"column":27},"end":{"row":17,"column":28},"action":"insert","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":17,"column":28},"end":{"row":17,"column":29},"action":"insert","lines":["m"]}]}],[{"group":"doc","deltas":[{"start":{"row":17,"column":29},"end":{"row":17,"column":30},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":18,"column":24},"end":{"row":18,"column":25},"action":"insert","lines":["G"]}]}],[{"group":"doc","deltas":[{"start":{"row":18,"column":25},"end":{"row":18,"column":26},"action":"insert","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":18,"column":26},"end":{"row":18,"column":27},"action":"insert","lines":["m"]}]}],[{"group":"doc","deltas":[{"start":{"row":18,"column":27},"end":{"row":18,"column":28},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":173,"column":2},"end":{"row":174,"column":0},"action":"insert","lines":["",""]},{"start":{"row":174,"column":0},"end":{"row":174,"column":2},"action":"insert","lines":["  "]}]}],[{"group":"doc","deltas":[{"start":{"row":174,"column":2},"end":{"row":175,"column":0},"action":"insert","lines":["",""]},{"start":{"row":175,"column":0},"end":{"row":175,"column":2},"action":"insert","lines":["  "]}]}],[{"group":"doc","deltas":[{"start":{"row":175,"column":2},"end":{"row":176,"column":0},"action":"insert","lines":["",""]},{"start":{"row":176,"column":0},"end":{"row":176,"column":2},"action":"insert","lines":["  "]}]}],[{"group":"doc","deltas":[{"start":{"row":176,"column":2},"end":{"row":177,"column":0},"action":"insert","lines":["",""]},{"start":{"row":177,"column":0},"end":{"row":177,"column":2},"action":"insert","lines":["  "]}]}],[{"group":"doc","deltas":[{"start":{"row":175,"column":2},"end":{"row":199,"column":6},"action":"insert","lines":["theapp.controller(\"NewRoomController\", [\"$scope\",","//$routeParams lets me use the URL routes as a variable, a lot like we did with our API work using .htaccess","      function($scope) {","","        $scope.newTopic = '';","","//when a new message shows up I will push it into the \"scope's\" message array, the template will deal with how to display it","        socket.on('message', function (msg) {","          console.log(\"new message\", msg.text);","          $scope.messages.push(msg);","          $scope.$apply();","        });","","//when the send function is called I will use the current name, roomTopic, and text value to decide what ","//everyone should read","        $scope.create = function create() {","          console.log('creating a new room:', $scope.newTopic);","          socket.emit('createRoom', {newTopic: $scope.newTopic});","          $scope.newTopic = '';","          rooms.push($scope.newTopic);","          location.assign('https://chat-roomapp-diogovictor.c9.io/');","//Also I'll clear the text so you can chat like you expect to chat.","        };","","  }]);"]}]}],[{"group":"doc","deltas":[{"start":{"row":175,"column":24},"end":{"row":175,"column":25},"action":"insert","lines":["G"]}]}],[{"group":"doc","deltas":[{"start":{"row":175,"column":25},"end":{"row":175,"column":26},"action":"insert","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":175,"column":26},"end":{"row":175,"column":27},"action":"insert","lines":["m"]}]}],[{"group":"doc","deltas":[{"start":{"row":175,"column":27},"end":{"row":175,"column":28},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":181,"column":0},"end":{"row":189,"column":22},"action":"remove","lines":["//when a new message shows up I will push it into the \"scope's\" message array, the template will deal with how to display it","        socket.on('message', function (msg) {","          console.log(\"new message\", msg.text);","          $scope.messages.push(msg);","          $scope.$apply();","        });","","//when the send function is called I will use the current name, roomTopic, and text value to decide what ","//everyone should read"]}]}],[{"group":"doc","deltas":[{"start":{"row":180,"column":0},"end":{"row":181,"column":0},"action":"remove","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":187,"column":0},"end":{"row":187,"column":67},"action":"remove","lines":["//Also I'll clear the text so you can chat like you expect to chat."]}]}],[{"group":"doc","deltas":[{"start":{"row":186,"column":69},"end":{"row":187,"column":0},"action":"remove","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":153,"column":0},"end":{"row":161,"column":22},"action":"remove","lines":["//when a new message shows up I will push it into the \"scope's\" message array, the template will deal with how to display it","        socket.on('message', function (msg) {","          console.log(\"new message\", msg.text);","          $scope.messages.push(msg);","          $scope.$apply();","        });","","//when the send function is called I will use the current name, roomTopic, and text value to decide what ","//everyone should read"]}]}],[{"group":"doc","deltas":[{"start":{"row":152,"column":0},"end":{"row":153,"column":0},"action":"remove","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":159,"column":0},"end":{"row":159,"column":67},"action":"remove","lines":["//Also I'll clear the text so you can chat like you expect to chat."]}]}],[{"group":"doc","deltas":[{"start":{"row":155,"column":29},"end":{"row":155,"column":33},"action":"remove","lines":["Room"]},{"start":{"row":155,"column":29},"end":{"row":155,"column":30},"action":"insert","lines":["G"]}]}],[{"group":"doc","deltas":[{"start":{"row":155,"column":30},"end":{"row":155,"column":31},"action":"insert","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":155,"column":31},"end":{"row":155,"column":32},"action":"insert","lines":["m"]}]}],[{"group":"doc","deltas":[{"start":{"row":155,"column":32},"end":{"row":155,"column":33},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":155,"column":33},"end":{"row":155,"column":34},"action":"insert","lines":["R"]}]}],[{"group":"doc","deltas":[{"start":{"row":155,"column":34},"end":{"row":155,"column":35},"action":"insert","lines":["o"]}]}],[{"group":"doc","deltas":[{"start":{"row":155,"column":35},"end":{"row":155,"column":36},"action":"insert","lines":["o"]}]}],[{"group":"doc","deltas":[{"start":{"row":155,"column":36},"end":{"row":155,"column":37},"action":"insert","lines":["m"]}]}],[{"group":"doc","deltas":[{"start":{"row":157,"column":10},"end":{"row":157,"column":15},"action":"remove","lines":["rooms"]},{"start":{"row":157,"column":10},"end":{"row":157,"column":11},"action":"insert","lines":["g"]}]}],[{"group":"doc","deltas":[{"start":{"row":157,"column":11},"end":{"row":157,"column":12},"action":"insert","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":157,"column":10},"end":{"row":157,"column":12},"action":"remove","lines":["ga"]},{"start":{"row":157,"column":10},"end":{"row":157,"column":15},"action":"insert","lines":["games"]}]}],[{"group":"doc","deltas":[{"start":{"row":166,"column":27},"end":{"row":166,"column":28},"action":"remove","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":166,"column":26},"end":{"row":166,"column":27},"action":"remove","lines":["m"]}]}],[{"group":"doc","deltas":[{"start":{"row":166,"column":25},"end":{"row":166,"column":26},"action":"remove","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":166,"column":24},"end":{"row":166,"column":25},"action":"remove","lines":["G"]}]}],[{"group":"doc","deltas":[{"start":{"row":147,"column":22},"end":{"row":147,"column":23},"action":"insert","lines":["G"]}]}],[{"group":"doc","deltas":[{"start":{"row":147,"column":23},"end":{"row":147,"column":24},"action":"insert","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":147,"column":19},"end":{"row":147,"column":38},"action":"remove","lines":["NewGaRoomController"]},{"start":{"row":147,"column":19},"end":{"row":147,"column":40},"action":"insert","lines":["NewGameRoomController"]}]}],[{"group":"doc","deltas":[{"start":{"row":876,"column":0},"end":{"row":881,"column":1},"action":"remove","lines":["","function play() {  ","   var bestBit = simulate(oBoard, xBoard);","   markBit(bestBit, 'O');","   ","}"]}]}],[{"group":"doc","deltas":[{"start":{"row":854,"column":0},"end":{"row":875,"column":1},"action":"remove","lines":["function markBit(markBit, player) {","   ","   var bit = 1;","   var posX = 0, posY = 0;","   ","   while ((markBit & bit) == 0) {","\tbit = bit << 1;","        posX++;","\tif (posX > 2) {","            posX = 0;","            posY++;","        }","   }","   ","    if (player == 'O') { ","        oBoard = oBoard | bit;","\tpaintO(posX, posY);","    } else {","        xBoard = xBoard | bit;","\tpaintX(posX, posY);","    }","}"]}]}],[{"group":"doc","deltas":[{"start":{"row":729,"column":0},"end":{"row":768,"column":1},"action":"remove","lines":["function clickHandler(e) {","","    var y = Math.floor(e.clientY / (height / 3));    ","    var x =  Math.floor(e.clientX / (width/ 3)); ","","    var bit =  (1 << x + ( y * 3 ));","","    if (isEmpty(xBoard, oBoard, bit)) {","","\tmarkBit(bit, 'X')","","        if (!checkNobody())  {","\t\tif (checkWinner(xBoard)) {","","\t\t    alert('You win!!');","\t\t    restart();","","\t\t} else {","\t\t","\t     \t   play();","\t\t   if (!checkNobody()) {","\t\t     ","\t\t       if (checkWinner(oBoard)) {","\t\t\t   alert('Loser!!');","\t\t\t   restart();","\t\t        }","\t\t    }","\t \t}","\t   }\t","     }","}","","function checkNobody(){","   if ((xBoard | oBoard) == 0x1FF) {\t ","       alert('Nobody won!!');","       restart();","       return true;","   }","   return false;","}"]}]}],[{"group":"doc","deltas":[{"start":{"row":738,"column":0},"end":{"row":813,"column":1},"action":"remove","lines":["function isEmpty(xBoard, oBoard, bit) {","   return (((xBoard & bit) == 0) && ((oBoard & bit) == 0));","}","","function simulate(oBoard, xBoard) {","","   var ratio = 0;"," ","   var bit = 0;","   for (var i= 0; i < 9; i++) {","","        var cBit = 1 << i;","","\tif (isEmpty(xBoard, oBoard, cBit)) {","","           if (checkWinner(oBoard | cBit)) {","\t      bit = cBit;","              break;","\t   } else if (checkWinner(xBoard | cBit)) {","\t      bit = cBit;","\t   } ","\t}","   }","   ","   if (bit == 0) {","      for (var i= 0; i < 9; i++) {","\t  var cBit = 1 << i;","","\t  if (isEmpty(xBoard, oBoard, cBit)) {","\t      var result = think(oBoard, xBoard, 'X', 0, 1)","\t      if (ratio == 0 || ratio < result) {","\t         ratio = result;","\t         bit = cBit;","\t      }","\t   }","       }","   }\t","   return bit;","}","","function think(oBoard, xBoard, player, bit, ratio) {","","   if (player == 'O') {","\toBoard = oBoard | bit;","   } else {","\txBoard = xBoard | bit;","   }","","   if (checkWinner(oBoard)) {","      ratio *= 1.1; ","      return ratio;","","   } else if (checkWinner(xBoard)) { ","      ","      ratio *= 0.7; ","      return ratio;","","   } else {","\tvar best = 0;","\tratio *= 0.6; ","","\tfor (var i= 0; i < 9; i++) {","\t\t","\t   if (isEmpty(xBoard, oBoard, 1 << i)) {","","               var newRatio = think(oBoard, xBoard, player == 'O' ? 'X' : 'O', 1 << i, ratio);","","               if (best == 0 || best < newRatio) {","\t\t               best = newRatio;","               }","\t  }"," \t}","","\treturn best;","   }","}"]}]}],[{"group":"doc","deltas":[{"start":{"row":667,"column":0},"end":{"row":679,"column":1},"action":"remove","lines":["function checkWinner(board) {","","   var result = false;","","   if (((board | 0x1C0) == board) || ((board | 0x38 ) == board) || ","\t((board | 0x7) == board) || ((board | 0x124) == board) || ","\t((board | 0x92) == board) || ((board | 0x49) == board) || ","\t((board | 0x111) == board) || ((board | 0x54) == board)) {  ","","\tresult = true;","   } ","   return result;","}"]}]}],[{"group":"doc","deltas":[{"start":{"row":666,"column":0},"end":{"row":667,"column":0},"action":"remove","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":656,"column":1},"end":{"row":664,"column":5},"action":"remove","lines":[" /*","   if (begin) {","      var ini = Math.abs(Math.floor(Math.random() * 9 - 0.1));","      markBit(1 << ini, 'O');","      begin = false;","   } else {","      begin = true;","   }   ","   */"]}]}],[{"group":"doc","deltas":[{"start":{"row":656,"column":0},"end":{"row":656,"column":1},"action":"remove","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":655,"column":2},"end":{"row":656,"column":0},"action":"remove","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":655,"column":1},"end":{"row":655,"column":2},"action":"remove","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":655,"column":0},"end":{"row":655,"column":1},"action":"remove","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":654,"column":23},"end":{"row":655,"column":0},"action":"remove","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":549,"column":8},"end":{"row":561,"column":9},"action":"remove","lines":["/*","        $scope.joinGame = function joinGame(){","          console.log(\"Trying to become a player...\", $scope.name);","          socket.emit(\"tryToBecomePlayer\", {gameRoom: $scope.gameTopic, clientName: $scope.name});","        };","        */","    /*","     $(\"#btJoinGame\").click(function(){","        console.log(\"Trying to become a player...\", $scope.name);","        alert(\"Trying to become a player!\");","        socket.emit(\"tryToBecomePlayer\", {gameRoom: $scope.gameTopic, clientName: $scope.name});","     });","       */"]}]}],[{"group":"doc","deltas":[{"start":{"row":549,"column":4},"end":{"row":549,"column":8},"action":"remove","lines":["    "]}]}],[{"group":"doc","deltas":[{"start":{"row":549,"column":0},"end":{"row":549,"column":4},"action":"remove","lines":["    "]}]}],[{"group":"doc","deltas":[{"start":{"row":548,"column":8},"end":{"row":549,"column":0},"action":"remove","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":543,"column":0},"end":{"row":544,"column":125},"action":"remove","lines":["//leftover code from previous version, the server gets a \"identify\" event with my current name, this helps ","//if you want everyone to get a list of current users (for instance knowing who is still in the room might be a nice feature)"]}]}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":543,"column":0},"end":{"row":543,"column":0},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1426490226929,"hash":"c729212cfb4f7c5d2860834c7b5cefb3a0f25b2a"}